"use strict";!function(){var e=window.Marzipano,t=window.bowser,o=window.screenfull,n=window.APP_DATA,s=document.querySelector("#pano"),c=document.querySelectorAll("#sceneList .scene"),a=document.querySelector("#autorotateToggle"),i=document.querySelector("#fullscreenToggle"),d=document.querySelector(".popup"),r=document.querySelector(".popup-close");if(window.matchMedia){var l=function(){u.matches?(document.body.classList.remove("desktop"),document.body.classList.add("mobile")):(document.body.classList.remove("mobile"),document.body.classList.add("desktop"))},u=matchMedia("(max-width: 500px), (max-height: 500px)");l(),u.addListener(l)}else document.body.classList.add("desktop");r.addEventListener("click",(function(){d.classList.remove("popup__open")})),document.body.classList.add("no-touch"),window.addEventListener("touchstart",(function(){document.body.classList.remove("no-touch"),document.body.classList.add("touch")})),t.msie&&parseFloat(t.version)<11&&document.body.classList.add("tooltip-fallback");var m={controls:{mouseViewMode:n.settings.mouseViewMode}},p=new e.Viewer(s,m),v=n.scenes.map((function(t){var o="tiles",n=e.ImageUrlSource.fromString(o+"/"+t.id+"/{z}/{f}/{y}/{x}.jpg",{cubeMapPreviewUrl:o+"/"+t.id+"/preview.jpg"}),s=new e.CubeGeometry(t.levels),c=e.RectilinearView.limit.traditional(t.faceSize,100*Math.PI/180,120*Math.PI/180),a=new e.RectilinearView(t.initialViewParameters,c),i=p.createScene({source:n,geometry:s,view:a,pinFirstLevel:!0});return t.infoHotspots.forEach((function(e){var t=function(e){var t=document.createElement("div");t.classList.add("hotspot"),t.classList.add("info-hotspot");var o=document.createElement("div");o.classList.add("info-hotspot-header");var n=document.createElement("div");return n.classList.add("info-hotspot-icon-wrapper"),o.appendChild(n),t.appendChild(o),t.querySelector(".info-hotspot-header").addEventListener("click",(()=>{console.log("hotspot",e),document.querySelector(".popup-pic.active")&&document.querySelector(".popup-pic.active").classList.remove("active");const t=e.id;document.querySelector(`#${t}`).classList.add("active"),d.classList.add("popup__open")})),function(e,t){t=["touchstart","touchmove","touchend","touchcancel","wheel","mousewheel"];for(var o=0;o<t.length;o++)e.addEventListener(t[o],(function(e){e.stopPropagation()}))}(t),t}(e);i.hotspotContainer().createHotspot(t,{yaw:e.yaw,pitch:e.pitch})})),{data:t,scene:i,view:a}})),h=e.autorotate({yawSpeed:.03,targetPitch:0,targetFov:Math.PI/2});n.settings.autorotateEnabled&&a.classList.add("enabled"),a.addEventListener("click",(function(){a.classList.contains("enabled")?(a.classList.remove("enabled"),M()):(a.classList.add("enabled"),E())})),o.enabled&&n.settings.fullscreenButton?(document.body.classList.add("fullscreen-enabled"),i.addEventListener("click",(function(){o.toggle()})),o.on("change",(function(){o.isFullscreen?i.classList.add("enabled"):i.classList.remove("enabled")}))):document.body.classList.add("fullscreen-disabled"),v.forEach((function(e){document.querySelector('#sceneList .scene[data-id="'+e.data.id+'"]').addEventListener("click",(function(){g(e)}))}));var w=document.querySelector("#viewUp"),L=document.querySelector("#viewDown"),f=document.querySelector("#viewLeft"),y=document.querySelector("#viewRight"),b=p.controls();function g(e){M(),e.view.setParameters(e.data.initialViewParameters),e.scene.switchTo(),E(),function(e){for(var t=0;t<c.length;t++){var o=c[t];o.getAttribute("data-id")===e.data.id?o.classList.add("current"):o.classList.remove("current")}}(e)}function E(){a.classList.contains("enabled")&&(p.startMovement(h),p.setIdleMovement(3e3,h))}function M(){p.stopMovement(),p.setIdleMovement(1/0)}b.registerMethod("upElement",new e.ElementPressControlMethod(w,"y",-.7,3),!0),b.registerMethod("downElement",new e.ElementPressControlMethod(L,"y",.7,3),!0),b.registerMethod("leftElement",new e.ElementPressControlMethod(f,"x",-.7,3),!0),b.registerMethod("rightElement",new e.ElementPressControlMethod(y,"x",.7,3),!0),g(v[0])}();